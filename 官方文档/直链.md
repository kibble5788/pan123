# 123云盘直链相关API接口文档
## 一、启用直链空间
### 1. 接口信息
- **请求方式**：POST
- **API地址**：域名 + /api/v1/direct-link/enable
- **实际请求示例地址**：https://open-api.123pan.com/api/v1/direct-link/enable

### 2. 请求参数
#### （1）Header参数
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| Authorization | string | 是 | 鉴权access_token |
| Platform | string | 是 | 固定为：open_platform |

#### （2）Body参数
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| fileID | number | 是 | 启用直链空间的文件夹的fileID |

### 3. 请求示例（Curl）
```curl
curl --location 'https://open-api.123pan.com/api/v1/direct-link/enable' \
--header 'Content-Type: application/json' \
--header 'Platform: open_platform' \
--header 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJl...(过长省略)' \
--data '{
"fileID": 4404009
}'
```

### 4. 返回数据
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| filename | string | 是 | 成功启用直链空间的文件夹的名称 |

### 5. 响应示例
```json
{
"code": 0,
"message": "ok",
"data": {
"filename": "测试直链目录"
},
"x-traceID": "28efdd5c-a663-43c8-a8b7-7a5aecaca0fc_kong-db-5898fdd8c6-t5pvc"
}
```

## 二、获取直链链接
### 1. 接口信息
- **请求方式**：GET
- **API地址**：域名 + /api/v1/direct-link/url
- **实际请求示例地址**：https://open-api.123pan.com/api/v1/direct-link/url?fileID=10861131

### 2. 请求参数
#### （1）Header参数
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| Authorization | string | 是 | 鉴权access_token |
| Platform | string | 是 | 固定为：open_platform |

#### （2）请求参数（URL参数）
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| fileID | number | 是 | 需要获取直链链接的文件的fileID |

### 3. 请求示例（Curl）
```curl
curl --location 'https://open-api.123pan.com/api/v1/direct-link/url?fileID=10861131' \
--header 'Content-Type: application/json' \
--header 'Platform: open_platform' \
--header 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJl...(过长省略)'
```

### 4. 返回数据
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| url | string | 是 | 文件对应的直链链接 |

### 5. 响应示例
```json
{
"code": 0,
"message": "ok" ,
"data": {
"url": "https://vip.123pan.cn/1815309870/%E6%B5%8B%E8%AF%95%E7%9B%B4%E9%93%BE%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E4%BB%8E%E8%8D%89%E5%8E%9F%E6%9D%A5.mp4"
},
"x-traceID": "126fa997-fdae-4cd6-b79f-42e134e17f1d_kong-db-5898fdd8c6-t5pvc"
}
```

## 三、禁用直链空间
### 1. 接口信息
- **请求方式**：POST
- **API地址**：域名 + /api/v1/direct-link/disable
- **实际请求示例地址**：https://open-api.123pan.com/api/v1/direct-link/disable

### 2. 请求参数
#### （1）Header参数
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| Authorization | string | 是 | 鉴权access_token |
| Platform | string | 是 | 固定为：open_platform |

#### （2）Body参数
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| fileID | number | 是 | 禁用直链空间的文件夹的fileID |

### 3. 请求示例（Curl）
```curl
curl --location 'https://open-api.123pan.com/api/v1/direct-link/disable' \
--header 'Content-Type: application/json' \
--header 'Platform: open_platform' \
--header 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ...(过长省略)' \
--data '{
"fileID": 4404009
}'
```

### 4. 返回数据
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| filename | string | 是 | 成功禁用直链空间的文件夹的名称 |

### 5. 响应示例
```json
{
"code": 0,
"message": "ok",
"data": {
"filename": "测试禁用直链目录"
},
"x-traceID": "86f8f6f1-636b-441d-8aca-560ef58771da_kong-db-5898fdd8c6-t5pvc"
}
```

## 四、直链缓存刷新
### 1. 接口信息
- **请求方式**：POST
- **API地址**：域名 + /api/v1/direct-link/cache/refresh
- **实际请求示例地址**：https://open-api.123pan.com/api/v1/direct-link/cache/refresh

### 2. 请求参数
#### （1）Header参数
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| Authorization | string | 是 | 鉴权access_token |
| Platform | string | 是 | 固定为：open_platform |
| Content-Type | string | 是 | 固定为：application/json |

#### （2）请求参数
此接口无需额外请求参数

### 3. 请求示例
#### （1）Curl
```curl
curl --location --request POST 'https://open-api.123pan.com/api/v1/direct-link/cache/refresh' \
--header 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJl...过长省略' \
--header 'Platform: open_platform' \
--header 'Content-Type: application/json'
```

#### （2）Java - OkHttp
```java
OkHttpClient client = new OkHttpClient().newBuilder()
  .build();
MediaType mediaType = MediaType.parse("application/json");
RequestBody body = RequestBody.create(mediaType, "{}");
Request request = new Request.Builder()
  .url("https://open-api.123pan.com/api/v1/direct-link/cache/refresh")
  .method("POST", body)
  .addHeader("Authorization", "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJl...过长省略")
  .addHeader("Platform", "open_platform")
  .addHeader("Content-Type", "application/json")
  .build();
Response response = client.newCall(request).execute();
```

#### （3）JavaScript - jQuery
```javascript
var settings = {
  "url": "https://open-api.123pan.com/api/v1/direct-link/cache/refresh",
  "method": "POST",
  "timeout": 0,
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJl...过长省略",
    "Platform": "open_platform",
    "Content-Type": "application/json"
  },
  "data": JSON.stringify({})
};

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

#### （4）NodeJs - Axios
```javascript
const axios = require('axios');

let config = {
  method: 'post',
  maxBodyLength: Infinity,
  url: 'https://open-api.123pan.com/api/v1/direct-link/cache/refresh',
  headers: {
    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJl...过长省略',
    'Platform': 'open_platform',
    'Content-Type': 'application/json'
  },
  data: JSON.stringify({})
};

axios.request(config)
.then((response) => {
  console.log(JSON.stringify(response.data));
})
.catch((error) => {
  console.log(error);
});
```

#### （5）Python - http.client
```python
import http.client
import json

conn = http.client.HTTPSConnection("open-api.123pan.com")
payload = json.dumps({})
headers = {
  'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJl...过长省略',
  'Platform': 'open_platform',
  'Content-Type': 'application/json'
}
conn.request("POST", "/api/v1/direct-link/cache/refresh", payload, headers)
res = conn.getresponse()
data = res.read()
print(data.decode("utf-8"))
```

### 4. 返回数据
| 名称 | 类型 | 是否必填 | 说明 |
| ---- | ---- | ---- | ---- |
| code | number | 是 | 响应码 |
| message | string | 是 | 响应信息 |
| data | object | 是 | 响应数据（空对象） |
| x-traceID | string | 是 | 追踪ID（可能为空） |

### 5. 响应示例
```json
{
"code": 0,
"message": "ok" ,
"data": {} ,
"x-traceID": ""
}
```