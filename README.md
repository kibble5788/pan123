# 123ç½‘ç›˜ SDK v2

åŸºäº TypeScript é‡æ„çš„ 123ç½‘ç›˜ API SDKï¼Œæä¾›å®Œæ•´çš„æ–‡ä»¶ç®¡ç†åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **TypeScript é‡æ„** - æä¾›å®Œæ•´ç±»å‹æ”¯æŒå’Œæ™ºèƒ½æç¤º
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡** - æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- ğŸ”§ **åŒæ ¼å¼æ”¯æŒ** - åŒæ—¶æ”¯æŒ ESM å’Œ CommonJS
- ğŸ›¡ï¸ **å®Œå–„é”™è¯¯å¤„ç†** - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- ğŸ“ **è¯¦ç»†æ–‡æ¡£** - å®Œæ•´çš„ API æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
- âš¡ **é«˜æ€§èƒ½** - ä¼˜åŒ–çš„æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½æµç¨‹
- ğŸ” **å®‰å…¨å¯é ** - å†…ç½®ä»¤ç‰Œç®¡ç†å’Œè‡ªåŠ¨åˆ·æ–°

## ğŸ“¦ å®‰è£…

```bash
npm install @ked3/pan123-sdk
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€é…ç½®

```typescript
import Pan123SDK from '@ked3/pan123-sdk';

const sdk = new Pan123SDK({
  clientId: 'your-client-id',
  clientSecret: 'your-client-secret',
  baseURL: 'https://open-api.123pan.com' // å¯é€‰ï¼Œé»˜è®¤å€¼
});
```

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `config.env` æ–‡ä»¶ï¼š

```env
PAN123_CLIENT_ID=your-client-id
PAN123_CLIENT_SECRET=your-client-secret
PAN123_BASE_URL=https://open-api.123pan.com
```

### åŸºæœ¬ä½¿ç”¨ï¼ˆæ— éœ€æ‰‹åŠ¨åˆå§‹åŒ–ä»¤ç‰Œï¼‰

```typescript
// è·å–æ ¹ç›®å½•æ–‡ä»¶åˆ—è¡¨ï¼ˆé¦–æ¬¡è°ƒç”¨ä¼šè‡ªåŠ¨åˆå§‹åŒ–å¹¶ç¼“å­˜ä»¤ç‰Œï¼‰
const fileList = await sdk.getFileList({ parentFileId: 0 });
console.log('æ–‡ä»¶åˆ—è¡¨:', fileList.data.fileList);

// ä¸Šä¼ æ–‡ä»¶ï¼ˆä»¤ç‰Œè‡ªåŠ¨ç®¡ç†ï¼‰
const uploadResult = await sdk.uploadFile('./test.zip', {
  parentFileID: 0,
  duplicate: 1 // 1-ä¿ç•™ä¸¤è€…ï¼Œ2-è¦†ç›–
});
console.log('ä¸Šä¼ ç»“æœ:', uploadResult);

// åˆ›å»ºæ–‡ä»¶å¤¹ï¼ˆä»¤ç‰Œè‡ªåŠ¨ç®¡ç†ï¼‰
const folder = await sdk.createFolder('æ–°æ–‡ä»¶å¤¹', 0);
console.log('æ–‡ä»¶å¤¹åˆ›å»º:', folder);
```

### CommonJS ç”¨æ³•

```javascript
const Pan123SDK = require('@ked3/pan123-sdk');

const sdk = new Pan123SDK({
  clientId: 'your-client-id',
  clientSecret: 'your-client-secret',
  debug: true
});

// ä¸éœ€è¦æ˜¾å¼è°ƒç”¨ initTokenï¼Œé¦–æ¬¡è°ƒç”¨ä¼šè‡ªåŠ¨åˆå§‹åŒ–å¹¶ç¼“å­˜ä»¤ç‰Œ
const folder = await sdk.createFolder('æ–°æ–‡ä»¶å¤¹11', 0);
console.log('æ–‡ä»¶å¤¹åˆ›å»º:', folder);
```

## ğŸ“š ä¸»è¦åŠŸèƒ½

### æ–‡ä»¶ç®¡ç†
- âœ… æ–‡ä»¶ä¸Šä¼ ï¼ˆæ”¯æŒç§’ä¼ ï¼‰
- âœ… æ–‡ä»¶åˆ—è¡¨è·å–
- âœ… æ–‡ä»¶è¯¦æƒ…æŸ¥è¯¢
- âœ… æ–‡ä»¶é‡å‘½å
- âœ… æ–‡ä»¶åˆ é™¤
- âœ… æ–‡ä»¶å¤¹åˆ›å»º

### é«˜çº§åŠŸèƒ½
- âœ… æ–‡ä»¶å‹ç¼©
- âœ… ç›´é“¾ç®¡ç†
- âœ… ä¸‹è½½é“¾æ¥è·å–
- âœ… æ‰¹é‡æ“ä½œæ”¯æŒ
- âœ… åˆ›å»ºç¦»çº¿ä¸‹è½½ä»»åŠ¡

### ä»¤ç‰Œç®¡ç†
- âœ… è‡ªåŠ¨ä»¤ç‰Œè·å–ï¼ˆé¦–æ¬¡éœ€è¦é‰´æƒçš„è°ƒç”¨ä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼‰
- âœ… ä»¤ç‰Œç¼“å­˜æœºåˆ¶ï¼ˆæŒä¹…äº SDK å®ä¾‹å†…å­˜ï¼‰
- âœ… ä»¤ç‰Œè‡ªåŠ¨åˆ·æ–°ï¼ˆåœ¨è¿‡æœŸå‰ 5 åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°ï¼‰

è¯´æ˜ï¼šæ— éœ€æ˜¾å¼è°ƒç”¨ `initToken()`ã€‚SDK ä¼šåœ¨é¦–æ¬¡éœ€è¦é‰´æƒçš„ API è°ƒç”¨å‰è‡ªåŠ¨å®Œæˆä»¤ç‰Œåˆå§‹åŒ–å¹¶å†™å…¥è¯·æ±‚å®ä¾‹ï¼›å½“ä»¤ç‰Œå³å°†è¿‡æœŸæ—¶ï¼ˆæå‰ 5 åˆ†é’Ÿï¼‰ï¼Œä¼šè‡ªåŠ¨åˆ·æ–°å¹¶æ›´æ–°ç¼“å­˜ã€‚

## ğŸ”§ é…ç½®é€‰é¡¹

```typescript
interface Pan123Config {
  clientId: string;        // å®¢æˆ·ç«¯IDï¼ˆå¿…éœ€ï¼‰
  clientSecret: string;    // å®¢æˆ·ç«¯å¯†é’¥ï¼ˆå¿…éœ€ï¼‰
  baseURL?: string;        // APIåŸºç¡€URLï¼ˆå¯é€‰ï¼‰
  accessToken?: string;    // é¢„è®¾è®¿é—®ä»¤ç‰Œï¼ˆå¯é€‰ï¼‰
}
```

## ğŸ“– API æ–‡æ¡£

è¯¦ç»†çš„ API æ–‡æ¡£è¯·å‚è€ƒ [API.md](./API.md)

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
npm test

# æˆ–ç›´æ¥è¿è¡Œæµ‹è¯•æ–‡ä»¶
node test/index.js
```

## ğŸ—ï¸ æ„å»º

```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# æ¸…ç†æ„å»ºæ–‡ä»¶
npm run clean
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ src/                 # æºä»£ç 
â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ services/       # æœåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ types/          # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts        # ä¸»å…¥å£
â”œâ”€â”€ dist/               # æ„å»ºè¾“å‡º
â”œâ”€â”€ test/               # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ rollup.config.js    # æ„å»ºé…ç½®
â””â”€â”€ tsconfig.json       # TypeScripté…ç½®
```

## ğŸ”„ ä» v1 è¿ç§»

v2 ç‰ˆæœ¬åœ¨ API è®¾è®¡ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¸»è¦å˜åŒ–ï¼š

1. **æ›´å¥½çš„ TypeScript æ”¯æŒ**
2. **ç»Ÿä¸€çš„é”™è¯¯å¤„ç†**
3. **ä¼˜åŒ–çš„æ–¹æ³•ç­¾å**
4. **æ¨¡å—åŒ–çš„ä»£ç ç»“æ„**

è¿ç§»ç¤ºä¾‹ï¼š

```typescript
// v1
const result = await sdk.uploadFile({
  parentFileId: 0,
  filename: 'test.zip',
  filePath: './test.zip'
});

// v2
const result = await sdk.uploadFile('./test.zip', {
  parentFileID: 0,
  duplicate: 1
});
```

## ğŸ“‹ æ³¨æ„äº‹é¡¹

1. **è®¤è¯ä¿¡æ¯å®‰å…¨**: è¯·å¦¥å–„ä¿ç®¡ clientId å’Œ clientSecretï¼Œä¸è¦åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­æš´éœ²
2. **æ–‡ä»¶å¤§å°é™åˆ¶**: å¤§æ–‡ä»¶ä¼šè‡ªåŠ¨è¿›è¡Œåˆ†ç‰‡ä¸Šä¼ ï¼Œè¯·ç¡®ä¿ç½‘ç»œç¨³å®š
3. **å¹¶å‘é™åˆ¶**: å»ºè®®æ§åˆ¶å¹¶å‘ä¸Šä¼ æ•°é‡ï¼Œé¿å…è§¦å‘ API é™åˆ¶
4. **é”™è¯¯é‡è¯•**: SDK å†…éƒ¨å·²å®ç°åŸºç¡€çš„é”™è¯¯é‡è¯•æœºåˆ¶
5. **Token ç®¡ç†**: SDK ä¼šè‡ªåŠ¨ç®¡ç† token çš„ç¼“å­˜å’Œåˆ·æ–°ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†

## ğŸ”— ç›¸å…³é“¾æ¥

- [123 ç½‘ç›˜å®˜æ–¹æ–‡æ¡£](https://www.123pan.com/developer)
- [API è¯¦ç»†æ–‡æ¡£](./API.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶

---

å¦‚æœè¿™ä¸ª SDK å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ æ˜Ÿæ ‡ï¼
